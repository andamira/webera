# webera

a handy shell script for the generation of static websites.

[![version: 0.1.X](https://img.shields.io/badge/version-0.1.X-d8ad4c.svg?style=flat-square)](#status)
[![language: bash](https://img.shields.io/badge/language-bash-447799.svg?style=flat-square)](https://github.com/andamira/webera/wiki/FAQ#why-bash-and-not-other_language--)
[![Build Status](https://img.shields.io/travis/andamira/webera/master.svg)](https://travis-ci.org/andamira/webera)
[![Code Climate](https://img.shields.io/codeclimate/github/andamira/webera.svg)](https://codeclimate.com/github/andamira/webera)

---

### Table of Contents

- [Features](#features-)
- [Installation](#installation-)
  - [Manually](#manually-)
  - [Mac OS X](#mac-os-x-)
- [Quick Start](#quick-start-)
  - [Examples](#examples-)
- [Documentation](#documentation-)
  - [Config](#config-)
  - [Usage](#usage-)
- [Reasons](#reasons-)
- [Status](#status-)

---


## Features [△](#table-of-contents "Back to TOC")

- A configurable system for processing content templates and
  static resources, allowing custom commands and workflows.
- Content template directives allowing nesting templates,
  setting variables, displaying the output of commands...
- Includes a versatile logging system.
- Supports automatic preview.


## Installation [△](#table-of-contents "Back to TOC")

### Manually [△](#table-of-contents "Back to TOC")

Download the webera script and make it executable:

```sh
$ wget git.io/webera && chmod +x webera
```

To install it globally:

```sh
$ sudo sh -c "wget git.io/webera -O /usr/local/bin/webera && chmod +x /usr/local/bin/webera"
```

### Mac OS X [△](#table-of-contents "Back to TOC")

In Mac OS X you **need** to install a more recent version of Bash (>=4)
than the one that comes by default. Also the GNU version of coreutils,
sed, grep and awk. An easy way to install them is with [Brew](http://brew.sh/):

```
$ brew tap homebrew/dupes
$ brew install bash coreutils gnu-sed grep gawk
```


## Quick Start [△](#table-of-contents "Back to TOC")

Generate a new config file (`webera -n`) or download the
[.weberarc](https://raw.githubusercontent.com/andamira/webera/master/.weberarc)
file from this repository.

Put your HTML templates in the `tem/` directory, and
configure the corresponding routes in the config file:

```sh
# this will process the templates from `tem/*` to `out/*/index.html`:
template : route : my-index.html   : /
template : route : other-page.html : /other-url/
```

Put your style.css file under `res/css/` and configure how
it will be processed (the simplest operation is to copy):

```sh
# this will copy `res/css/` to `out/css/`:
resource : copy : css/ : css/
```

Finally generate the website by telling the script
to process all the configured templates and resources.

```sh
$ ./webera --process-all
```

The website is generated by default in the `out/` directory:

```sh
$ find out/

  out/
  out/index.html
  out/other-url/index.html
  out/res/css/style.css
```

### Examples [△](#table-of-contents "Back to TOC")

There are *(will be)* several examples you can take a look into:

- Their source code is in the [examples/](https://github.com/andamira/webera/tree/master/examples) directory of the repository.
- The generated output is in the [docs/examples](https://github.com/andamira/webera/tree/master/docs/examples) directory.
- The result is rendered in [andamira.github.io/webera/examples](https://andamira.github.io/webera/examples/).


## Documentation [△](#table-of-contents "Back to TOC")

[The wiki](https://github.com/andamira/webera/wiki) is the documentation reference.


### Config [△](#table-of-contents "Back to TOC")

The following configuration snippet shows how to:

- configure the options.
- define commands for later use on the indicated resources (or templates).
- process the resources using the previous custom command.
- process the templates, defining the routes using both file and directory URL endpoints.

```sh
# Customized Options
config : WEB_BROWSER_BIN : chromium-browser
config : DIR_OUTPUT      : /home/$USER/my-website

# Define Custom Commands
command : sass2css : sass {ORIGIN} {TARGET}

# Process Resources
resource : sass2css : scss/styles.scss : css/main.css

# Process Templates to URL Endpoints
template : route : index.html     : /
template : route : about.html     : /about/
template : route : about-me.html  : /about/me/
template : route : about-you.html : /about/you.html
```

See [`.weberarc`](https://github.com/andamira/webera/blob/master/.weberarc) and
the [Configuration](https://github.com/andamira/webera/wiki/Configuration) wiki page,
for more information about the configuration possibilities.


### Usage [△](#table-of-contents "Back to TOC")

There are many flags to customize how the script should behave,
which you can combine with a more stable custom configuration.
See the wiki page for the
[order of priority](https://github.com/andamira/webera/wiki/Configuration#order-of-priority-)
between all the configuration sources.

The following examples demonstrate common usage situations, featuring both long and short flags.


1. Process the templates, and write a level-2 logfile,
   after clearing any previous log:

  `webera --process-templates --clear-log --log-level=2`

  `webera -t -cL2`


2. Process both the templates and the resources,
   and then preview using a custom browser:

  `webera --process-all --preview --browser-bin=vivaldi`

  `webera -awW vivaldi`


3. Process resources *from* a custom resources directory
   *to* a custom output directory, with spaces in the path:

  `webera --process-resources --dir-resources=resB/ --dir-output="out B"`

  `webera -rR resB/ -O "out B"`


4. Generate a new config file using the provided name,
   and write there the custom settings for the server and port.

  `webera --new-config --file-config=conf/webera.conf --server-type=php --server-port=8080`

  `webera -nF conf/webera.conf -S php -P 8080`


Run `./webera --help` to see the basic help on flags, or take a deeper look to the complete [list of flags](https://github.com/andamira/webera/wiki/Script-Arguments#list-of-flags-) in the wiki.


## Reasons [△](#table-of-contents "Back to TOC")

webera is (increasingly) loosely inspired by
[Statix](https://gist.github.com/plugnburn/c2f7cc3807e8934b179e),
the [Unix philosophy](https://en.wikipedia.org/wiki/Unix_philosophy),
the [suckless philosophy](http://suckless.org/philosophy),
the [Swiss Army knife](https://en.wikipedia.org/wiki/Swiss_Army_knife)
and the [Primitive Technology guy](https://www.youtube.com/channel/UCAL3JXZSzSm8AlZyD3nQdBA).

The intention is to see how far this idea can be taken,
and try to achive an ideal balance between
reliability, simplicity and handiness.

[See the FAQ page in the wiki](https://github.com/andamira/webera/wiki/FAQ).


## Status [△](#table-of-contents "Back to TOC")

This project is not stable yet.
